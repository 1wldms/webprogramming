<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weather and Style Recommendation</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/result.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/feedback.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body 
  data-hour="{{ hour }}" 
  data-night="{{ 'true' if is_night else 'false' }}"
  data-month="{{ current_month }}"
  data-year="{{ current_year }}"
  data-day="{{ current_day }}"
>
  <div class="container">
    <header>
      <h1>Weather and Style Recommendation</h1>
      <div class="header-buttons">
        <button class="my-page-button" onclick='window.location.href="{{ url_for("mypage") }}"'>My Page</button>
      </div>
    </header>

    <main>
      <div class="info-calendar-container">
        <div class="info-box card">
          <h2>Information</h2>
          <hr>
          <p><strong>Location:</strong> {{ city }}</p>
          <p><strong>Date:</strong> {{ current_date }}</p>
          <p><strong>Style:</strong> {{ style }}</p>
        </div>
        <div class="calendar-box card">
          <div id="mini-calendar"></div>
        </div>
      </div>

      <!-- Weather widget (unchanged) -->
      <!-- ... All your other divs below this remain unchanged ... -->
    </main>

    <button id="feedback-btn">ðŸ’¬ Feedback</button>

    <button id="feedback-btn">ðŸ’¬ Feedback</button>

    <div id="feedback-modal" class="hidden">
      <form id="feedback-form">
        <h2 style="margin-bottom: 20px;">ðŸ’Œ Feedback</h2>
        <div class="form-group">
          <label for="feedback-name">Your Name</label>
          <input type="text" id="feedback-name" name="name" required />
        </div>
        <div class="form-group">
          <label for="feedback-content">Your Feedback</label>
          <textarea id="feedback-content" name="content" rows="4" required></textarea>
        </div>
        <button type="submit" class="btn active">Submit</button>
        <button type="button" class="btn" onclick="closeFeedback()">Close</button>
      </form>
    </div>


   
    <!-- Scripts -->
    <script src="{{ url_for('static', filename='js/feedback.js') }}" defer></script>

  <script>
  document.addEventListener('DOMContentLoaded', function () {
    const currentMonth = parseInt(document.body.dataset.month);
    const currentYear = parseInt(document.body.dataset.year);
    const currentDay = parseInt(document.body.dataset.day);

    function generateCalendar(month, year, highlightDay) {
      const calendarElement = document.getElementById('mini-calendar');
      if (!calendarElement) return;

      calendarElement.innerHTML = '';

      const monthNames = ["January", "February", "March", "April", "May", "June",
                          "July", "August", "September", "October", "November", "December"];
      const dayNames = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"];

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      const header = document.createElement('div');
      header.classList.add('calendar-month-header');
      header.textContent = `${monthNames[month]} ${year}`;
      calendarElement.appendChild(header);

      const daysHeader = document.createElement('div');
      daysHeader.classList.add('calendar-days-of-week');
      dayNames.forEach(d => {
        const span = document.createElement('span');
        span.textContent = d;
        daysHeader.appendChild(span);
      });
      calendarElement.appendChild(daysHeader);

      const grid = document.createElement('div');
      grid.classList.add('calendar-grid');

      for (let i = 0; i < firstDay; i++) {
        const empty = document.createElement('span');
        empty.classList.add('empty-cell');
        grid.appendChild(empty);
      }

      for (let i = 1; i <= daysInMonth; i++) {
        const cell = document.createElement('span');
        cell.textContent = i;
        cell.classList.add('calendar-day');
        if (i === highlightDay) cell.classList.add('current-day');
        grid.appendChild(cell);
      }

      calendarElement.appendChild(grid);
    }

    generateCalendar(currentMonth, currentYear, currentDay);
  });
</script>
  </div>
</body>
</html>